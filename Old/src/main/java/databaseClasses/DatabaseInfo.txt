drop table if exists users;
drop table if exists auth_tokens;
drop table if exists people;
drop table if exists events;

create if not exists table users
(
    user_name text primary key,
    password text not null,
    email text not null,
    first_name text not null,
    last_name text not null,
    gender text not null,
    person_id text not null,
    constraint ck_gender check (gender in ('f', 'm'))
);

create if not exists table auth_tokens
(
    auth_token text primary key,
    user_name text not null,
    password text not null
);

create if not exists table people
(
    person_id text primary key,
    associated_user_name text not null,
    first_name text not null,
    last_name text not null,
    gender text not null,
    father_id text,
    mother_id text,
    spouse_id text,
    constraint ck_gender check (gender in ('f', 'm'))
);

create if not exists table events
(
    event_id text primary key,
    associated_user_name text not null,
    person_id text not null,
    latitude real not null,
    longitude real not null,
    country text not null,
    city text not null,
    event_type text not null,
    year integer not null
);
